= simple_form_for([:super_admin, @user], :html => {:class => "user-form form-horizontal", :id => "user_form"}, 
                  :validate => true) do |f|
  - title_user = t("school.user_info")
  - if notification = f.error_notification
    .alert.alert-error.fade.in
      %a{:class => "close", 'data-dismiss' => "alert", :href => "#"} &times;
      = notification
  .form-actions
    %center
      - back = :back
      - if (f.object.new_record? && @back == "users")
        - back = super_admin_school_path(@school_id)
      - elsif (f.object.new_record? && @back == "schools")
        - back = super_admin_schools_path
      - elsif !f.object.new_record?
        - back = super_admin_school_path(@user.school)

      = hidden_field_tag :back, @back
      = hidden_field_tag :school_id, @school_id
      = link_to t("common.cancel"), back, :class => "btn"
      - if f.object.new_record?
        = f.button :submit, :value => t("school.create_user")
      - else
        - if @user.is?(:admin) 
          = hidden_field_tag "email_admin", @user.email
          - title_user = t("school.admin_info")
          = f.button :submit, :value => t("common.save"), :id  => "btn_admin"
        - else
          = f.button :submit, :value => t("common.save")
  .form-inputs
    .title= t("school.school_info")
    .school-info
      = f.association(:school, :collection => School.order(:name),
                :selected => @school ? @school.id : @school_id,
                :label_method => :short_name,
                :label => t("school.name"), :prompt => t("common.select_prompt"), 
                :disabled => @user.is?(:admin))
    .title= title_user
    .school-info
      = f.input :first_name, :input_html => {:class => "valid_name"}
      = f.input :last_name, :input_html => {:class => "valid_name"}
      - disable = false
      - if !f.object.new_record? && f.object.is?(:admin)
        - disable = true
      - if disable
        = f.association :role, :collection => [Role[:admin]], :disabled => disable, :include_blank => false
      - else
        = f.association :role, :required => true, :collection => @roles, :include_blank => false
      = f.input :email, :input_html => {:class => "valid_email"}
      = f.input :phone, :input_html => {:class => "valid_number"}
      = f.input :notes, :input_html => {:rows => "5", :class => "width-area"}
      
      = hidden_field_tag :back, params[:back]
      = hidden_field_tag :school_id, params[:school_id]
      
- unless @user.new_record?
  .account
    .title= t("school.account") 
    .reset_password
      = link_to(t("admin.teacher.reset_password"), reset_password_super_admin_user_path(@user), 
                :data => {:confirm => t("admin.teacher.reset_password_confirm")}, 
                :method => :put, :remote => true)
      %p= t("admin.teacher.reset_password_description")
    .blocked
      = hidden_field_tag "check_locked", @user.is_blocked
      - mgs = ""
      - if @user.is_blocked
        - mgs = t("admin.teacher.unblock_confirm")
      - else
        - mgs = t("admin.teacher.block_confirm")
      = link_to(check_box_tag("is_blocked", 1, 1), 
                blocked_account_super_admin_user_path(@user, :is_blocked => (!@user.is_blocked).to_s), 
                :data => { :confirm => mgs }, :method => :put, :remote => true, 
                :title => t("admin.teacher.block_account"))
      %span.ckb-label= t("admin.teacher.block_account")
      %p.text-block= t("admin.teacher.block_account_description")
